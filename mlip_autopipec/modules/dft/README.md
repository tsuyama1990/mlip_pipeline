# DFT Module Architecture

This package is responsible for all operations related to Density Functional Theory (DFT) calculations using Quantum Espresso. It follows a strict separation of concerns, with each class having a single, well-defined responsibility.

## Class Responsibilities

- **`DFTFactory` (`factory.py`)**: This is the main orchestrator and the primary entry point for other parts of the application. It coordinates the other components to perform a complete DFT calculation for a given atomic structure.

- **`QEInputGenerator` (`input_generator.py`)**: This class is solely responsible for generating the content of the Quantum Espresso input file (`pw.x` input). It takes a configuration object and an atomic structure and produces a formatted string.

- **`QEFileManager` (`file_manager.py`)**: This class handles all filesystem operations. It creates a secure temporary directory for the calculation, provides paths for input and output files, and cleans up the directory when the calculation is complete.

- **`QEProcessRunner` (`process_runner.py`)**: This class's only responsibility is to execute the external `pw.x` command as a subprocess. It handles the command execution, captures output, and manages errors related to the subprocess.

- **`QEOutputParser` (`output_parser.py`)**: This class is responsible for parsing the output file generated by Quantum Espresso. It extracts key physical quantities like energy, forces, and stress and returns them in a structured format.

## Workflow

A typical workflow orchestrated by `DFTFactory` is as follows:
1. A `QEFileManager` is created to manage the calculation's files.
2. The `QEInputGenerator` is called to generate the input file content.
3. The `QEFileManager` writes the generated content to the input file.
4. The `QEProcessRunner` is called to execute `pw.x` with the input file.
5. The `QEOutputParser` is called to parse the resulting output file.
6. The results are attached to the `Atoms` object.
7. The `QEFileManager` cleans up the temporary directory.
