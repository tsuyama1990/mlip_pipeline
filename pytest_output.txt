============================= test session starts ==============================
platform linux -- Python 3.12.12, pytest-9.0.2, pluggy-1.6.0
rootdir: /app
configfile: pyproject.toml
testpaths: tests
plugins: cov-7.0.0
collected 176 items

tests/e2e/test_cycle01.py ......                                         [  3%]
tests/uat/test_cycle02_structure_gen.py ...                              [  5%]
tests/uat/test_cycle03_oracle.py ...                                     [  6%]
tests/uat/test_cycle06_orchestrator.py .                                 [  7%]
tests/unit/dft/test_inputs.py ....                                       [  9%]
tests/unit/dft/test_parsers.py ....                                      [ 11%]
tests/unit/dft/test_recovery.py ....                                     [ 14%]
tests/unit/dft/test_runner.py ....                                       [ 16%]
tests/unit/dft/test_security.py ..                                       [ 17%]
tests/unit/generator/test_builder.py ....                                [ 19%]
tests/unit/generator/test_coverage.py ......                             [ 23%]
tests/unit/generator/test_defects.py .....                               [ 26%]
tests/unit/generator/test_schemas.py ......                              [ 29%]
tests/unit/generator/test_sqs.py ..                                      [ 30%]
tests/unit/generator/test_transformations.py ....                        [ 32%]
tests/unit/inference/test_eon_schema.py ...                              [ 34%]
tests/unit/inference/test_eon_wrapper.py ......                          [ 38%]
tests/unit/inference/test_inference_inputs.py .....                      [ 40%]
tests/unit/inference/test_pace_driver.py ..                              [ 42%]
tests/unit/inference/test_parsers.py ....                                [ 44%]
tests/unit/inference/test_runner.py ...                                  [ 46%]
tests/unit/inference/test_schemas.py .....                               [ 48%]
tests/unit/inference/test_writer.py .                                    [ 49%]
tests/unit/orchestration/test_db_manager.py ..                           [ 50%]
tests/unit/orchestration/test_state.py ...                               [ 52%]
tests/unit/orchestration/test_strategies.py ..                           [ 53%]
tests/unit/orchestration/test_workflow.py ..                             [ 54%]
tests/unit/test_atoms.py ....                                            [ 56%]
tests/unit/test_cli_validation.py ...                                    [ 58%]
tests/unit/test_config.py .......                                        [ 62%]
tests/unit/test_database.py .....................                        [ 74%]
tests/unit/test_feedback_fixes.py ....                                   [ 76%]
tests/unit/training/test_dataset.py .                                    [ 77%]
tests/unit/training/test_metrics.py .......                              [ 81%]
tests/unit/training/test_pacemaker.py .............                      [ 88%]
tests/unit/training/test_schemas.py .....                                [ 91%]
tests/unit/utils/test_embedding.py ...                                   [ 93%]
tests/unit/validation/test_physics_validators.py ......                  [ 96%]
tests/unit/validation/test_schemas.py ......                             [100%]

=============================== warnings summary ===============================
tests/uat/test_cycle06_orchestrator.py::test_uat_full_cycle_simulation
tests/unit/orchestration/test_workflow.py::test_workflow_run_loop
  /app/src/mlip_autopipec/orchestration/dashboard.py:93: UserWarning: No artists with labels found to put in legend.  Note that artists whose label start with an underscore are ignored when legend() is called with no argument.
    plt.legend()

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.12-final-0 _______________

Name                                                     Stmts   Miss  Cover   Missing
--------------------------------------------------------------------------------------
src/mlip_autopipec/__init__.py                               4      0   100%
src/mlip_autopipec/app.py                                   80     34    58%   33-35, 73-78, 90-96, 107-113, 126-128, 138-144, 148
src/mlip_autopipec/config/__init__.py                        3      0   100%
src/mlip_autopipec/config/factory.py                        37     37     0%   1-62
src/mlip_autopipec/config/models.py                         54      0   100%
src/mlip_autopipec/config/schemas/common.py                 38     19    50%   15-20, 25-43, 54
src/mlip_autopipec/config/schemas/core.py                   37      2    95%   28, 33
src/mlip_autopipec/config/schemas/dft.py                    48      6    88%   35, 37, 50, 67-69
src/mlip_autopipec/config/schemas/exploration.py             5      0   100%
src/mlip_autopipec/config/schemas/generator.py              26      0   100%
src/mlip_autopipec/config/schemas/inference.py              42      1    98%   60
src/mlip_autopipec/config/schemas/surrogate.py               8      0   100%
src/mlip_autopipec/config/schemas/training.py               40      2    95%   49-50
src/mlip_autopipec/config/schemas/validation.py             20      0   100%
src/mlip_autopipec/config/schemas/workflow.py                6      0   100%
src/mlip_autopipec/core/__init__.py                          0      0   100%
src/mlip_autopipec/core/services.py                         11      1    91%   30
src/mlip_autopipec/core/workspace.py                        13     13     0%   1-25
src/mlip_autopipec/data_models/__init__.py                   5      0   100%
src/mlip_autopipec/data_models/atoms.py                     21      1    95%   15
src/mlip_autopipec/data_models/candidate.py                 10     10     0%   1-19
src/mlip_autopipec/data_models/dft_models.py                51      5    90%   54, 56, 64, 66, 68
src/mlip_autopipec/data_models/inference_models.py          24      7    71%   28-35
src/mlip_autopipec/data_models/state.py                     14      0   100%
src/mlip_autopipec/data_models/structure_enums.py            9      9     0%   1-11
src/mlip_autopipec/data_models/training_data.py             59     32    46%   29-33, 41-60, 65-76, 90-95
src/mlip_autopipec/data_models/validation.py                15      0   100%
src/mlip_autopipec/dft/__init__.py                           0      0   100%
src/mlip_autopipec/dft/constants.py                          3      0   100%
src/mlip_autopipec/dft/inputs.py                            70      7    90%   33, 81-85, 130, 162
src/mlip_autopipec/dft/parsers.py                           32      2    94%   58, 78
src/mlip_autopipec/dft/recovery.py                          32      4    88%   72-78
src/mlip_autopipec/dft/runner.py                           151     44    71%   66, 76-77, 80, 110-112, 168-184, 196-198, 204, 207-210, 219-225, 233-242, 259
src/mlip_autopipec/exceptions.py                            25      7    72%   43-48, 51-52
src/mlip_autopipec/generator/__init__.py                     5      0   100%
src/mlip_autopipec/generator/builder.py                     90      5    94%   45-46, 104, 143, 159
src/mlip_autopipec/generator/defects.py                     83     10    88%   82, 106-109, 132, 177-180
src/mlip_autopipec/generator/distortions.py                 43      4    91%   68-69, 81-82
src/mlip_autopipec/generator/sqs.py                         44      9    80%   55, 78-81, 93-96
src/mlip_autopipec/generator/transformations.py             48      5    90%   47-49, 51, 94
src/mlip_autopipec/inference/__init__.py                     8      0   100%
src/mlip_autopipec/inference/analysis.py                    44     39    11%   22, 34-88
src/mlip_autopipec/inference/drivers/pace_driver.py         51     31    39%   11-15, 47-85, 88
src/mlip_autopipec/inference/eon.py                         72     10    86%   65-66, 113-115, 118-119, 166-168
src/mlip_autopipec/inference/inputs.py                      35      0   100%
src/mlip_autopipec/inference/interfaces.py                   5      0   100%
src/mlip_autopipec/inference/masking.py                     33     29    12%   23-76
src/mlip_autopipec/inference/parsers.py                     41      3    93%   38, 79-81
src/mlip_autopipec/inference/processing.py                  40      8    80%   45, 51, 57-59, 69, 78-79
src/mlip_autopipec/inference/runner.py                      82     26    68%   94, 100-115, 127, 135-137, 159-160, 164-165, 173-176
src/mlip_autopipec/inference/uq.py                          23     17    26%   9, 16-38
src/mlip_autopipec/inference/writer.py                      21      0   100%
src/mlip_autopipec/modules/__init__.py                       0      0   100%
src/mlip_autopipec/modules/cli_handlers/handlers.py        168    121    28%   71-167, 177-197, 201-214, 218-249, 262-273
src/mlip_autopipec/modules/config_generator.py              15     15     0%   3-74
src/mlip_autopipec/modules/descriptors.py                   31     31     0%   3-62
src/mlip_autopipec/modules/dft.py                           67     67     0%   6-189
src/mlip_autopipec/modules/exploration.py                   51     51     0%   7-130
src/mlip_autopipec/modules/explorer.py                      46     46     0%   3-90
src/mlip_autopipec/modules/generator.py                     72     72     0%   3-203
src/mlip_autopipec/modules/inference.py                    136    136     0%   7-333
src/mlip_autopipec/modules/screening.py                     41     41     0%   3-68
src/mlip_autopipec/modules/training_orchestrator.py         22     12    45%   43-45, 60-73
src/mlip_autopipec/monitoring/__init__.py                    0      0   100%
src/mlip_autopipec/monitoring/dashboard.py                  63     63     0%   1-115
src/mlip_autopipec/orchestration/__init__.py                 7      0   100%
src/mlip_autopipec/orchestration/dashboard.py               57      3    95%   80, 87, 100
src/mlip_autopipec/orchestration/database.py               180     25    86%   51-53, 100, 140-142, 176-177, 194-195, 278, 290-292, 303, 319-320, 322-323, 333-334, 347-349
src/mlip_autopipec/orchestration/interfaces.py              10      0   100%
src/mlip_autopipec/orchestration/phase_executor.py          23      1    96%   27
src/mlip_autopipec/orchestration/phases/base.py             10      0   100%
src/mlip_autopipec/orchestration/phases/dft.py              36      6    83%   26, 47-48, 52, 58-59
src/mlip_autopipec/orchestration/phases/exploration.py      35     17    51%   26-53
src/mlip_autopipec/orchestration/phases/inference.py        51     14    73%   27-28, 34-35, 42-43, 50-54, 81-83
src/mlip_autopipec/orchestration/phases/selection.py        34      7    79%   21-22, 33-35, 54, 58-59
src/mlip_autopipec/orchestration/phases/training.py         41     10    76%   16-17, 31-33, 54-60
src/mlip_autopipec/orchestration/strategies.py              27      1    96%   48
src/mlip_autopipec/orchestration/task_queue.py              74     60    19%   29-52, 69-77, 96-124, 139-141, 147-151
src/mlip_autopipec/orchestration/workflow.py                90     11    88%   77, 90, 95-99, 124-125, 169-170
src/mlip_autopipec/surrogate/__init__.py                     5      0   100%
src/mlip_autopipec/surrogate/candidate_manager.py           14     11    21%   8, 11-22
src/mlip_autopipec/surrogate/descriptors.py                 30     30     0%   1-84
src/mlip_autopipec/surrogate/mace_client.py                 62     62     0%   1-146
src/mlip_autopipec/surrogate/mace_wrapper.py                53     46    13%   11-13, 19-34, 40-61, 67-105
src/mlip_autopipec/surrogate/model_interface.py              8      0   100%
src/mlip_autopipec/surrogate/pipeline.py                   100     84    16%   16-22, 32-53, 56-61, 64-65, 68-115, 118-155
src/mlip_autopipec/surrogate/sampling.py                    19     14    26%   7, 19-43
src/mlip_autopipec/training/__init__.py                      4      0   100%
src/mlip_autopipec/training/config_gen.py                   16     16     0%   1-46
src/mlip_autopipec/training/dataset.py                      53     33    38%   54-56, 76-118
src/mlip_autopipec/training/metrics.py                      39      3    92%   39-41
src/mlip_autopipec/training/pacemaker.py                   143     40    72%   49-60, 131-132, 136-138, 146-150, 186-187, 194-197, 207-215, 224-226, 248-249, 262-264
src/mlip_autopipec/training/physics.py                      39     28    28%   43-109
src/mlip_autopipec/utils/__init__.py                         0      0   100%
src/mlip_autopipec/utils/ase_utils.py                       42     42     0%   12-120
src/mlip_autopipec/utils/config_utils.py                    30     17    43%   24, 26-27, 40-56
src/mlip_autopipec/utils/dask_utils.py                      12      7    42%   31-43
src/mlip_autopipec/utils/data_loader.py                     15     15     0%   5-39
src/mlip_autopipec/utils/embedding.py                       46      0   100%
src/mlip_autopipec/utils/logging.py                         11      4    64%   24-29
src/mlip_autopipec/utils/resilience.py                      29     29     0%   6-93
src/mlip_autopipec/utils/workflow_utils.py                  32     32     0%   3-53
src/mlip_autopipec/validation/__init__.py                    0      0   100%
src/mlip_autopipec/validation/elasticity.py                 49      3    94%   28, 69-70
src/mlip_autopipec/validation/eos.py                        31      3    90%   29, 97-98
src/mlip_autopipec/validation/phonon.py                     36      7    81%   30, 60-73, 116-117
src/mlip_autopipec/validation/runner.py                     24      3    88%   33, 43-44
--------------------------------------------------------------------------------------
TOTAL                                                     4090   1778    57%
======================= 176 passed, 2 warnings in 54.12s =======================
