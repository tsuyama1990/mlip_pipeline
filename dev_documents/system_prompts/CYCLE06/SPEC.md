# Cycle 06 Specification: Validation & Orchestration Finalization

## 1. Summary
This final cycle implements the comprehensive **Validation Suite** to ensure the physical correctness of the trained potential. It includes automated tests for phonon dispersion stability, elastic constants, and equation of state (EOS) curves. Additionally, it integrates **Adaptive Kinetic Monte Carlo (aKMC)** via **EON**, enabling the system to explore long-time scale phenomena like ordering and diffusion, completing the "Grand Challenge" workflow.

## 2. System Architecture

### 2.1. File Structure
The following file structure must be created/modified. **Bold** files are to be implemented in this cycle.

```ascii
src/mlip_autopipec/
├── components/
│   ├── validator/
│   │   ├── **__init__.py**
│   │   ├── **base.py**     # Base Validator
│   │   ├── **phonon.py**   # Phonopy Interface
│   │   ├── **elastic.py**  # Elastic Constants
│   │   └── **report.py**   # HTML Report Generator
│   └── dynamics/
│       └── **eon_engine.py** # EON (aKMC) Wrapper
tests/
    ├── **test_validator.py**
    └── **test_eon.py**
```

### 2.2. Class Blueprints

#### `src/mlip_autopipec/components/validator/phonon.py`
```python
from mlip_autopipec.components.validator.base import BaseValidator

class PhononValidator(BaseValidator):
    def validate(self, potential_path: Path, structure: Structure) -> ValidationResult:
        """
        Run Phonopy (finite displacement) using the ACE potential.
        Check for imaginary frequencies (instability).
        """
        pass
```

## 3. Design Architecture

### 3.1. Validation Configuration
*   **`ValidatorConfig`**:
    *   `phonon_supercell`: List[int] (e.g., [2, 2, 2]).
    *   `elastic_strain_range`: float (e.g., 0.01).
    *   `eos_volumes`: List[float] (scaling factors).

### 3.2. EON (aKMC) Integration
*   Use `eonclient` to run Kinetic Monte Carlo simulations.
*   The potential evaluation is hooked via a Python driver script (`pace_driver.py`) generated by our system, allowing EON to use the `.yace` file.

## 4. Implementation Approach

1.  **Validator**: Implement `PhononValidator` using `phonopy` library API. Implement `ElasticValidator` using `ase.eos` and strain filters.
2.  **Reporting**: Generate a static HTML report summarizing RMSE, parity plots, phonon band structures (plots), and elastic constants.
3.  **EON Wrapper**: Implement `EonDynamics` to manage the aKMC workflow (initializing client/server locally or via MPI).

## 5. Test Strategy

### 5.1. Unit Testing
*   **`test_validator.py`**:
    *   Run validation on a simple Lennard-Jones potential (using ASE's LJ calculator as a proxy for ACE).
    *   Verify that stable FCC structures pass the phonon test (no imaginary modes).

### 5.2. Integration Testing (Grand Challenge)
*   **Full Pipeline Test**:
    *   Run the complete `Orchestrator` loop on the `FePt` system.
    *   Cycle 1-5: Train potential.
    *   Cycle 6: Validate potential.
    *   Verify `validation_report.html` is created and contains "PASS" status.
