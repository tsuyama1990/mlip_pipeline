# Cycle 02 UAT: Structure Generator

## 1. Test Scenarios

### Scenario 1: Random Structure Generation
*   **ID**: S02-01
*   **Goal**: Verify that structures are generated with physical constraints (no overlap).
*   **Priority**: Critical.
*   **Steps**:
    1.  Configure `generator_type: RANDOM`.
    2.  Run `StructureGenerator.generate(n=10)`.
    3.  Assert that all 10 structures have `min_distance > 1.5 Ã…`.
    4.  Assert that all atoms have correct `atomic_numbers` (e.g., Mg, O).

### Scenario 2: M3GNet Cold Start (Mocked)
*   **ID**: S02-02
*   **Goal**: Verify that M3GNet integration works or gracefully degrades.
*   **Priority**: High.
*   **Steps**:
    1.  Configure `generator_type: M3GNET`.
    2.  If `m3gnet` installed:
        *   Run `StructureGenerator.generate(n=10)`.
        *   Assert energy is present in `atoms.info`.
    3.  If `m3gnet` missing:
        *   Assert logs contain "Falling back to Random".

### Scenario 3: Adaptive Policy
*   **ID**: S02-03
*   **Goal**: Verify that the policy switches strategies based on context.
*   **Priority**: Medium.
*   **Steps**:
    1.  Mock `ExplorationContext.cycle = 0`. Assert strategy is `M3GNET` or `RANDOM`.
    2.  Mock `ExplorationContext.cycle = 1` and `uncertainty=High`. Assert strategy is `MD`.
    3.  Mock `ExplorationContext.cycle = 5` and `uncertainty=Low`. Assert strategy is `STRAIN`.

## 2. Behavior Definitions (Gherkin)

```gherkin
Feature: Structure Generation

  Scenario: Generating valid random structures
    Given a configuration with elements "Mg" and "O"
    When I request 5 random structures
    Then I should receive a list of 5 Atom objects
    And no two atoms should be closer than 1.5 Angstroms
    And each structure should have the tag "provenance: random"

  Scenario: M3GNet Fallback
    Given "m3gnet" library is not installed
    When I request structures using "M3GNET" generator
    Then I should receive structures generated by "RANDOM" generator
    And a warning "M3GNet not found, falling back" should be logged
```
